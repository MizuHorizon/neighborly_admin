"use strict";exports.id=164,exports.ids=[164],exports.modules={164:(a,b,c)=>{c.r(b),c.d(b,{default:()=>ad});var d=c(687),e=c(3210),f=c(1423),g=c(5390),h=c(4224),i=c(2857);let j=(0,h.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function k({className:a,variant:b,...c}){return(0,d.jsx)("div",{className:(0,i.cn)(j({variant:b}),a),...c})}let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...b}));l.displayName="Card";let m=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...b}));m.displayName="CardHeader";let n=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b}));n.displayName="CardTitle",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,i.cn)("text-sm text-muted-foreground",a),...b})).displayName="CardDescription";let o=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,i.cn)("p-6 pt-0",a),...b}));o.displayName="CardContent",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,i.cn)("flex items-center p-6 pt-0",a),...b})).displayName="CardFooter";let p=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{className:"relative w-full overflow-auto",children:(0,d.jsx)("table",{ref:c,className:(0,i.cn)("w-full caption-bottom text-sm",a),...b})}));p.displayName="Table";let q=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("thead",{ref:c,className:(0,i.cn)("[&_tr]:border-b",a),...b}));q.displayName="TableHeader";let r=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("tbody",{ref:c,className:(0,i.cn)("[&_tr:last-child]:border-0",a),...b}));r.displayName="TableBody",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("tfoot",{ref:c,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...b})).displayName="TableFooter";let s=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("tr",{ref:c,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...b}));s.displayName="TableRow";let t=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("th",{ref:c,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...b}));t.displayName="TableHead";let u=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("td",{ref:c,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...b}));u.displayName="TableCell",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("caption",{ref:c,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",a),...b})).displayName="TableCaption";var v=c(6349),w=c(4719),x=c(5071),y=c(9891),z=c(83),A=c(1312),B=c(3861);let C="https://api.neighborly.live/api";class D extends Error{constructor(a,b){super(b),this.status=a,this.name="ApiError"}}async function E(a,b={}){let c=localStorage.getItem("accessToken");console.log(`Making API request to: ${C}${a}`),console.log("Request options:",b),console.log("Access token:",c?"Present":"Missing");let d=await fetch(`${C}${a}`,{...b,headers:{"Content-Type":"application/json",...c&&{Authorization:`Bearer ${c}`},...b.headers}});if(console.log("Response status:",d.status),console.log("Response headers:",Object.fromEntries(d.headers.entries())),!d.ok){let b=`HTTP ${d.status}: ${d.statusText}`;try{let a=await d.json();a.message?b=a.message:a.error&&(b=a.error)}catch(a){}throw console.error("API request failed:",{endpoint:a,status:d.status,statusText:d.statusText,errorMessage:b}),new D(d.status,b)}let e=await d.json();return console.log("API response data:",e),e}let F={getDriverApplications:a=>E(`/driver-applications${a?`?status=${a}`:""}`),approveApplication:a=>E(`/driver-applications/${a}/approve`,{method:"POST",headers:{"Content-Type":"application/json"}}),rejectApplication:(a,b)=>E(`/driver-applications/${a}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:b})})};var G=c(4050),H=c(8960),I=c(1860);let J=H.bL;H.l9;let K=H.ZL;H.bm;let L=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(H.hJ,{ref:c,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b}));L.displayName=H.hJ.displayName;let M=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(K,{children:[(0,d.jsx)(L,{}),(0,d.jsxs)(H.UC,{ref:e,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[b,(0,d.jsxs)(H.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,d.jsx)(I.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));M.displayName=H.UC.displayName;let N=({className:a,...b})=>(0,d.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...b});N.displayName="DialogHeader";let O=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(H.hE,{ref:c,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...b}));O.displayName=H.hE.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(H.VY,{ref:c,className:(0,i.cn)("text-sm text-muted-foreground",a),...b})).displayName=H.VY.displayName;var P=c(6582);let Q=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:c,...b}));Q.displayName="Textarea";var R=c(8869),S=c(1550),T=c(8340),U=c(228),V=c(7992),W=c(4478),X=c(22),Y=c(5334),Z=c(7900),$=c(5291),_=c(7566),aa=c(3010);function ab({application:a,isOpen:b,onClose:c}){let{toast:f}=(0,_.dj)(),[h,i]=(0,e.useState)(!1),[j,k]=(0,e.useState)("");console.log("ApplicationModal rendered:",{isOpen:b,applicationId:a?.application_id,status:a?.status,showRejectionInput:h,rejectionReason:j});let l=(0,G.n)({mutationFn:()=>(console.log("Approving application:",a.application_id),F.approveApplication(a.application_id)),onSuccess:a=>{console.log("Approval successful:",a),$.qQ.invalidateQueries({queryKey:["/api/driver-applications"]}),f({title:"Application Approved",description:"The driver application has been approved successfully."}),c()},onError:a=>{console.error("Approval failed:",a),f({title:"Approval Failed",description:a instanceof Error?a.message:"Failed to approve the application. Please try again.",variant:"destructive"})}}),m=(0,G.n)({mutationFn:b=>(console.log("Rejecting application:",a.application_id,"with reason:",b),F.rejectApplication(a.application_id,b)),onSuccess:a=>{console.log("Rejection successful:",a),$.qQ.invalidateQueries({queryKey:["/api/driver-applications"]}),f({title:"Application Rejected",description:"The driver application has been rejected."}),c()},onError:a=>{console.error("Rejection failed:",a),f({title:"Rejection Failed",description:a instanceof Error?a.message:"Failed to reject the application. Please try again.",variant:"destructive"})}}),n=(a,b)=>{a?window.open(a,"_blank"):f({title:"Document Not Available",description:`${b} document is not available.`,variant:"destructive"})};return(0,d.jsx)(J,{open:b,onOpenChange:c,children:(0,d.jsx)(M,{className:"max-w-4xl max-h-[90vh] overflow-y-auto p-0 border-0 shadow-notion-lg",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg",children:[(0,d.jsxs)(N,{className:"px-6 py-4 border-b border-notion-border",children:[(0,d.jsx)(O,{className:"text-lg font-semibold text-notion-text",children:"Review Application"}),(0,d.jsxs)("p",{className:"text-sm text-notion-text-muted mt-1",children:[a.full_name," â€¢ Submitted ",(()=>{try{return a.created_at?(0,aa.GP)(new Date(a.created_at),"MMM dd, yyyy"):"Unknown date"}catch{return"Unknown date"}})()]})]}),(0,d.jsxs)("div",{className:"px-6 py-6 space-y-8",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,d.jsx)("div",{className:"h-8 w-8 bg-notion-black rounded-lg flex items-center justify-center",children:(0,d.jsx)(R.A,{className:"h-4 w-4 text-white"})}),(0,d.jsx)("h3",{className:"text-base font-semibold text-notion-text",children:"Personal Information"})]}),(0,d.jsx)("div",{className:"bg-notion-gray rounded-lg p-4",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(R.A,{className:"h-4 w-4 text-notion-text-muted"}),(0,d.jsx)("span",{className:"text-xs font-medium text-notion-text-muted uppercase tracking-wider",children:"Full Name"})]}),(0,d.jsx)("p",{className:"text-sm font-medium text-notion-text","data-testid":"text-full-name",children:a.full_name})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(S.A,{className:"h-4 w-4 text-notion-text-muted"}),(0,d.jsx)("span",{className:"text-xs font-medium text-notion-text-muted uppercase tracking-wider",children:"Email"})]}),(0,d.jsx)("p",{className:"text-sm text-notion-text","data-testid":"text-email",children:a.email})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(T.A,{className:"h-4 w-4 text-notion-text-muted"}),(0,d.jsx)("span",{className:"text-xs font-medium text-notion-text-muted uppercase tracking-wider",children:"Phone Number"})]}),(0,d.jsx)("p",{className:"text-sm text-notion-text","data-testid":"text-phone",children:a.phone_number})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(U.A,{className:"h-4 w-4 text-notion-text-muted"}),(0,d.jsx)("span",{className:"text-xs font-medium text-notion-text-muted uppercase tracking-wider",children:"Date of Birth"})]}),(0,d.jsx)("p",{className:"text-sm text-notion-text","data-testid":"text-dob",children:(()=>{try{return a.date_of_birth?(0,aa.GP)(new Date(a.date_of_birth),"MMM dd, yyyy"):"Unknown date"}catch{return"Unknown date"}})()})]}),(0,d.jsxs)("div",{className:"md:col-span-2 space-y-1",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(V.A,{className:"h-4 w-4 text-notion-text-muted"}),(0,d.jsx)("span",{className:"text-xs font-medium text-notion-text-muted uppercase tracking-wider",children:"Address"})]}),(0,d.jsx)("p",{className:"text-sm text-notion-text","data-testid":"text-address",children:a.address})]})]})})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,d.jsx)("div",{className:"h-8 w-8 bg-notion-black rounded-lg flex items-center justify-center",children:(0,d.jsx)(W.A,{className:"h-4 w-4 text-white"})}),(0,d.jsx)("h3",{className:"text-base font-semibold text-notion-text",children:"Vehicle Information"})]}),(0,d.jsx)("div",{className:"bg-notion-gray rounded-lg p-4",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("span",{className:"text-xs font-medium text-notion-text-muted uppercase tracking-wider",children:"Vehicle"}),(0,d.jsxs)("p",{className:"text-sm font-medium text-notion-text","data-testid":"text-car-name",children:[a.car.car_name," ",a.car.car_model]})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("span",{className:"text-xs font-medium text-notion-text-muted uppercase tracking-wider",children:"License Plate"}),(0,d.jsx)("p",{className:"text-sm text-notion-text font-mono","data-testid":"text-license-plate",children:a.car.license_plate})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("span",{className:"text-xs font-medium text-notion-text-muted uppercase tracking-wider",children:"Color"}),(0,d.jsx)("p",{className:"text-sm text-notion-text capitalize","data-testid":"text-car-color",children:a.car.car_color})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("span",{className:"text-xs font-medium text-notion-text-muted uppercase tracking-wider",children:"Year"}),(0,d.jsx)("p",{className:"text-sm text-notion-text","data-testid":"text-car-year",children:a.car.car_year||"Not specified"})]})]})})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,d.jsx)("div",{className:"h-8 w-8 bg-notion-black rounded-lg flex items-center justify-center",children:(0,d.jsx)(X.A,{className:"h-4 w-4 text-white"})}),(0,d.jsx)("h3",{className:"text-base font-semibold text-notion-text",children:"Documents"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{className:"bg-white border border-notion-border rounded-lg p-4 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,d.jsx)("div",{className:"h-10 w-10 bg-notion-black rounded-lg flex items-center justify-center",children:(0,d.jsx)(X.A,{className:"h-5 w-5 text-white"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-notion-text",children:"Driving License"}),(0,d.jsxs)("p",{className:"text-xs text-notion-text-muted",children:["Expires ",(()=>{try{return a.driving_license_expiry_date?(0,aa.GP)(new Date(a.driving_license_expiry_date),"MMM dd, yyyy"):"Unknown date"}catch{return"Unknown date"}})()]})]})]}),(0,d.jsxs)(g.$,{size:"sm",variant:"ghost",className:"w-full justify-start text-notion-text hover:bg-notion-gray transition-colors duration-200",onClick:()=>n(a.driving_license_url,"Driving License"),"data-testid":"button-view-license",children:[(0,d.jsx)(Y.A,{className:"h-4 w-4 mr-2"}),"View Document"]})]}),(0,d.jsxs)("div",{className:"bg-white border border-notion-border rounded-lg p-4 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,d.jsx)("div",{className:"h-10 w-10 bg-notion-black rounded-lg flex items-center justify-center",children:(0,d.jsx)(X.A,{className:"h-5 w-5 text-white"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-notion-text",children:"Insurance"}),(0,d.jsx)("p",{className:"text-xs text-notion-text-muted",children:a.insurance_document_number}),(0,d.jsxs)("p",{className:"text-xs text-notion-text-muted",children:["Expires ",(()=>{try{return a.insurance_expiry_date?(0,aa.GP)(new Date(a.insurance_expiry_date),"MMM dd, yyyy"):"Unknown date"}catch{return"Unknown date"}})()]})]})]}),(0,d.jsxs)(g.$,{size:"sm",variant:"ghost",className:"w-full justify-start text-notion-text hover:bg-notion-gray transition-colors duration-200",onClick:()=>n(a.insurance_document_url,"Insurance"),"data-testid":"button-view-insurance",children:[(0,d.jsx)(Y.A,{className:"h-4 w-4 mr-2"}),"View Document"]})]}),(0,d.jsxs)("div",{className:"bg-white border border-notion-border rounded-lg p-4 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,d.jsx)("div",{className:"h-10 w-10 bg-notion-black rounded-lg flex items-center justify-center",children:(0,d.jsx)(X.A,{className:"h-5 w-5 text-white"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-notion-text",children:"Car Sticker"}),(0,d.jsx)("p",{className:"text-xs text-notion-text-muted",children:"Vehicle identification"})]})]}),(0,d.jsxs)(g.$,{size:"sm",variant:"ghost",className:"w-full justify-start text-notion-text hover:bg-notion-gray transition-colors duration-200",onClick:()=>n(a.car_sticker_url,"Car Sticker"),"data-testid":"button-view-sticker",children:[(0,d.jsx)(Y.A,{className:"h-4 w-4 mr-2"}),"View Document"]})]})]})]}),h&&(0,d.jsxs)("div",{className:"bg-notion-gray rounded-lg p-4 border border-notion-border",children:[(0,d.jsx)(P.J,{htmlFor:"rejectionReason",className:"text-sm font-medium text-notion-text mb-3 block",children:"Rejection Reason"}),(0,d.jsx)(Q,{id:"rejectionReason",rows:3,className:"w-full border-notion-border bg-white text-notion-text placeholder:text-notion-text-light focus:border-notion-black focus:ring-notion-black/20 focus:ring-2 transition-all duration-200",placeholder:"Please provide a detailed reason for rejection...",value:j,onChange:a=>k(a.target.value),"data-testid":"textarea-rejection-reason"})]})]}),(0,d.jsx)("div",{className:"px-6 py-4 border-t border-notion-border bg-notion-gray-light",style:{position:"relative",zIndex:10},children:(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,d.jsxs)("div",{className:"w-full text-xs text-notion-text-muted mb-2",children:["Debug: Status: ",a.status," | Can Approve: ","pending"===a.status," | Can Reject: ","pending"===a.status]}),(0,d.jsx)(g.$,{className:"w-full bg-blue-500 text-white mb-2",onClick:()=>{console.log("Test button clicked!"),alert("Test button works!")},style:{position:"relative",zIndex:20},children:"Test Button - Click Me!"}),(0,d.jsx)(g.$,{className:"flex-1 bg-notion-black text-white hover:bg-notion-text-muted shadow-sm transition-colors duration-200",onClick:()=>{if(console.log("Approve button clicked for application:",a.application_id),console.log("Current application status:",a.status),console.log("Mutation state:",{isPending:l.isPending,isError:l.isError}),"pending"!==a.status){console.log("Cannot approve - application status is not pending"),f({title:"Cannot Approve",description:"Only pending applications can be approved.",variant:"destructive"});return}l.mutate()},disabled:"pending"!==a.status||l.isPending||m.isPending,"data-testid":"button-approve",style:{position:"relative",zIndex:20},children:l.isPending?(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,d.jsx)("span",{children:"Approving..."})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Approve"]})}),(0,d.jsx)(g.$,{variant:"destructive",className:"flex-1 bg-notion-text-muted text-white hover:bg-notion-text shadow-sm transition-colors duration-200",onClick:()=>{if(console.log("Reject button clicked for application:",a.application_id),console.log("Current application status:",a.status),console.log("Show rejection input:",h),console.log("Rejection reason:",j),"pending"!==a.status){console.log("Cannot reject - application status is not pending"),f({title:"Cannot Reject",description:"Only pending applications can be rejected.",variant:"destructive"});return}if(!h){console.log("Showing rejection input"),i(!0);return}if(!j.trim()){console.log("Rejection reason is empty"),f({title:"Rejection Reason Required",description:"Please provide a reason for rejection.",variant:"destructive"});return}console.log("Submitting rejection with reason:",j),m.mutate(j)},disabled:"pending"!==a.status||l.isPending||m.isPending,"data-testid":"button-reject",style:{position:"relative",zIndex:20},children:m.isPending?(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,d.jsx)("span",{children:"Rejecting..."})]}):h?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Z.A,{className:"h-4 w-4 mr-2"}),"Send Rejection"]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Reject"]})})]})})]})})})}var ac=c(7849);function ad(){let{user:a,logout:b}=(0,ac.A)(),[c,h]=(0,e.useState)(null),[i,j]=(0,e.useState)(!1),{data:C,isLoading:D,error:E}=(0,f.I)({queryKey:["/api/driver-applications"],queryFn:()=>F.getDriverApplications()}),G=C?.data||[],H={total:G.length||0,pending:G.filter(a=>"pending"===a.status).length||0,approved:G.filter(a=>"approved"===a.status).length||0,rejected:G.filter(a=>"rejected"===a.status).length||0};return D?(0,d.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,d.jsxs)("div",{className:"text-center space-y-4",children:[(0,d.jsx)("div",{className:"h-16 w-16 bg-foreground rounded-lg flex items-center justify-center mx-auto",children:(0,d.jsx)("div",{className:"h-8 w-8 border-4 border-white border-t-transparent rounded-full animate-spin"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Loading Dashboard..."}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fetching driver applications"})]})]})}):E?(0,d.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,d.jsxs)("div",{className:"text-center space-y-4",children:[(0,d.jsx)("div",{className:"h-16 w-16 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:(0,d.jsx)(x.A,{className:"h-8 w-8 text-red-600"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Error Loading Dashboard"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"Failed to fetch driver applications. Please try again."})]})]})}):(0,d.jsxs)("div",{className:"min-h-screen bg-notion-gray-light",children:[(0,d.jsx)("div",{className:"bg-white border-b border-notion-border shadow-sm",children:(0,d.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,d.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)("div",{className:"h-12 w-12 bg-notion-black rounded-lg flex items-center justify-center",children:(0,d.jsx)(y.A,{className:"h-6 w-6 text-white"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-notion-text",children:"Neighborly Admin"}),(0,d.jsx)("p",{className:"text-sm text-notion-text-muted",children:"Driver Application Management"})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-notion-text",children:a?.name}),(0,d.jsxs)("p",{className:"text-xs text-notion-text-muted capitalize",children:[a?.role," Access"]})]}),(0,d.jsxs)(g.$,{variant:"outline",size:"sm",onClick:b,className:"border-notion-border hover:bg-notion-gray text-notion-text hover:text-notion-text transition-colors duration-200","data-testid":"button-logout",children:[(0,d.jsx)(z.A,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})}),(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,d.jsxs)(l,{className:"bg-white border border-notion-border rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200",children:[(0,d.jsxs)(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(n,{className:"text-sm font-medium text-notion-text-muted",children:"Total Applications"}),(0,d.jsx)(A.A,{className:"h-4 w-4 text-notion-text-light"})]}),(0,d.jsx)(o,{children:(0,d.jsx)("div",{className:"text-2xl font-bold text-notion-text","data-testid":"stat-total",children:H.total})})]}),(0,d.jsxs)(l,{className:"bg-white border border-notion-border rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200",children:[(0,d.jsxs)(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(n,{className:"text-sm font-medium text-notion-text-muted",children:"Pending Review"}),(0,d.jsx)(v.A,{className:"h-4 w-4 text-notion-text-muted"})]}),(0,d.jsx)(o,{children:(0,d.jsx)("div",{className:"text-2xl font-bold text-notion-text","data-testid":"stat-pending",children:H.pending})})]}),(0,d.jsxs)(l,{className:"bg-white border border-notion-border rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200",children:[(0,d.jsxs)(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(n,{className:"text-sm font-medium text-notion-text-muted",children:"Approved"}),(0,d.jsx)(w.A,{className:"h-4 w-4 text-notion-text-muted"})]}),(0,d.jsx)(o,{children:(0,d.jsx)("div",{className:"text-2xl font-bold text-notion-text","data-testid":"stat-approved",children:H.approved})})]}),(0,d.jsxs)(l,{className:"bg-white border border-notion-border rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200",children:[(0,d.jsxs)(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(n,{className:"text-sm font-medium text-notion-text-muted",children:"Rejected"}),(0,d.jsx)(x.A,{className:"h-4 w-4 text-notion-text-muted"})]}),(0,d.jsx)(o,{children:(0,d.jsx)("div",{className:"text-2xl font-bold text-notion-text","data-testid":"stat-rejected",children:H.rejected})})]})]}),(0,d.jsxs)(l,{className:"bg-white border border-notion-border rounded-lg shadow-sm",children:[(0,d.jsxs)(m,{className:"border-b border-notion-border",children:[(0,d.jsx)(n,{className:"text-lg font-semibold text-notion-text",children:"Driver Applications"}),(0,d.jsx)("p",{className:"text-sm text-notion-text-muted",children:"Review and manage driver applications for Neighborly"})]}),(0,d.jsxs)(o,{className:"p-0",children:[(0,d.jsxs)(p,{children:[(0,d.jsx)(q,{children:(0,d.jsxs)(s,{className:"border-b border-notion-border bg-notion-gray",children:[(0,d.jsx)(t,{className:"font-medium text-notion-text-muted py-3",children:"Driver"}),(0,d.jsx)(t,{className:"font-medium text-notion-text-muted py-3",children:"Contact"}),(0,d.jsx)(t,{className:"font-medium text-notion-text-muted py-3",children:"Vehicle"}),(0,d.jsx)(t,{className:"font-medium text-notion-text-muted py-3",children:"Status"}),(0,d.jsx)(t,{className:"font-medium text-notion-text-muted py-3",children:"Actions"})]})}),(0,d.jsx)(r,{children:G?.map(a=>(0,d.jsxs)(s,{className:"border-b border-notion-border hover:bg-notion-gray transition-colors duration-150",children:[(0,d.jsx)(u,{className:"py-4",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"font-medium text-notion-text","data-testid":`text-name-${a.application_id}`,children:a.full_name}),(0,d.jsxs)("div",{className:"text-sm text-notion-text-muted",children:["ID: ",a.application_id?.slice(0,8),"..."]})]})}),(0,d.jsx)(u,{className:"py-4",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm text-notion-text",children:a.email}),(0,d.jsx)("div",{className:"text-sm text-notion-text-muted",children:a.phone_number})]})}),(0,d.jsx)(u,{className:"py-4",children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"font-medium text-notion-text",children:[a.car.car_name," ",a.car.car_model]}),(0,d.jsx)("div",{className:"text-sm text-notion-text-muted font-mono",children:a.car.license_plate})]})}),(0,d.jsx)(u,{className:"py-4",children:(a=>{switch(a){case"pending":return(0,d.jsxs)(k,{variant:"secondary",className:"bg-notion-gray text-notion-text border-notion-border hover:bg-notion-gray-dark transition-colors duration-200",children:[(0,d.jsx)(v.A,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return(0,d.jsxs)(k,{variant:"secondary",className:"bg-notion-black text-white border-notion-black hover:bg-notion-text-light transition-colors duration-200",children:[(0,d.jsx)(w.A,{className:"h-3 w-3 mr-1"}),"Approved"]});case"rejected":return(0,d.jsxs)(k,{variant:"secondary",className:"bg-notion-gray text-notion-text border-notion-border hover:bg-notion-gray-dark transition-colors duration-200",children:[(0,d.jsx)(x.A,{className:"h-3 w-3 mr-1"}),"Rejected"]});default:return(0,d.jsx)(k,{variant:"outline",className:"text-notion-text-muted border-notion-border",children:a})}})(a.status)}),(0,d.jsx)(u,{className:"py-4",children:(0,d.jsxs)(g.$,{size:"sm",variant:"outline",onClick:()=>{h(a),j(!0)},className:"border-notion-border hover:bg-notion-gray text-notion-text hover:text-notion-text transition-colors duration-150","data-testid":`button-review-${a.application_id}`,children:[(0,d.jsx)(B.A,{className:"h-4 w-4 mr-1"}),"Review"]})})]},a.application_id))})]}),G?.length===0&&(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)(A.A,{className:"h-12 w-12 text-notion-text-light mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-medium text-notion-text mb-2",children:"No Applications Found"}),(0,d.jsx)("p",{className:"text-notion-text-muted",children:"There are currently no driver applications to review."})]})]})]})]}),c&&(0,d.jsx)(ab,{application:c,isOpen:i,onClose:()=>{j(!1),h(null)}})]})}},5390:(a,b,c)=>{c.d(b,{$:()=>j});var d=c(687),e=c(3210),f=c(8730),g=c(4224),h=c(2857);let i=(0,g.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=e.forwardRef(({className:a,variant:b,size:c,asChild:e=!1,...g},j)=>{let k=e?f.DX:"button";return(0,d.jsx)(k,{className:(0,h.cn)(i({variant:b,size:c,className:a})),ref:j,...g})});j.displayName="Button"},6582:(a,b,c)=>{c.d(b,{J:()=>j});var d=c(687),e=c(3210),f=c(8148),g=c(4224),h=c(2857);let i=(0,g.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.b,{ref:c,className:(0,h.cn)(i(),a),...b}));j.displayName=f.b.displayName}};